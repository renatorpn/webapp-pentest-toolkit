#!/bin/bash

packages=(
    "python3"
    "golang"
    "git"
)

function update_upgrade() {
    sudo apt-get update
    sudo apt-get full-upgrade -y
}

function install_core_packages(){
    echo "++++ PACKAGE INSTALLATION ++++"
    for package_name in "${packages[@]}"; do
        echo "Installing package: $package_name"
        sudo apt-get -qq install -y "package_name"
        
        check_package_install "$package_name"
    done
}

function install_kiterunner(){
    echo "Installing kiterunner"
    git clone https://github.com/assetnote/kiterunner.git
    cd kiterunner
    make build
    sudo ln -s $(pwd)/dist/kr /usr/local/bin/kr
    
    check_package_install "kiterunner"
}

function install_arjun(){
    echo "Installing arjun"
    cd /opt/
    sudo git clone https://github.com/s0md3v/Arjun.git
}

function check_package_install(){
    if [ $? -eq 0 ]; then
        echo "Package $1 installed successfully!"
    else
        echo "Package $1 installation failed!"
    fi
}

function install_tools(){
    install_core_packages
    install_kiterunner
 }

update_upgrade
install_tools