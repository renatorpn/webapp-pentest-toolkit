#!/bin/bash

packages=(
    "python3"
    "golang"
    "git"
    "burpsuite"
)

function update_upgrade() {
    sudo apt-get update
    sudo apt-get full-upgrade -y
}

function install_core_packages(){
    echo "++++ PACKAGE INSTALLATION ++++"
    for package_name in "${packages[@]}"; do
        echo "Installing package: $package_name"
        sudo apt-get -qq install -y "package_name"
        
        check_package_install "$package_name"
    done
}

function install_chrome(){
    echo "Installing google-chrome-stable current"
    sudo wget https://dl.google.com/linux/direct/google-chrome-stable_current_amd64.deb
    sudo apt -qq install -y ./google-chrome-stable_current_amd64.deb
    
    check_package_install "google-chrome-stable current"
}


function install_postman(){
    echo "Installing postman latest"
    sudo wget https://dl.pstmn.io/download/latest/linux64 -O postman-linux-x64.tar.gz
    sudo tar -xvzf postman-linux-x64.tar.gz -C /opt
    sudo ln -s /opt/Postman/Postman /usr/bin/postman
    
    check_package_install "postman latest"
}

function install_kiterunner(){
    echo "Installing kiterunner"
    git clone https://github.com/assetnote/kiterunner.git
    cd kiterunner
    make build
    sudo ln -s $(pwd)/dist/kr /usr/local/bin/kr
    
    check_package_install "kiterunner"
}

function install_arjun(){
    echo "Installing arjun"
    cd /opt/
    sudo git clone https://github.com/s0md3v/Arjun.git
}

function check_package_install(){
    if [ $? -eq 0 ]; then
        echo "Package $1 installed successfully!"
    else
        echo "Package $1 installation failed!"
    fi
}

function install_tools(){
    install_core_packages
    install_chrome
    install_kiterunner
    install_postman
}

update_upgrade
install_tools